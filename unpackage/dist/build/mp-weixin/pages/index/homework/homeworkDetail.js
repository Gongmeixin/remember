"use strict";const e=require("../../../common/vendor.js"),n={data:()=>({testHour:0,testMinute:1,testSecond:0,class:null,answerArr:[],total:0,currentIndex:0,userAnswer:"",userAnswerArr:[],bookId:0,volumeId:0,unitId:0,isShow:!0,tipContent:"",canBack:!1}),onLoad(e){console.log(e),this.class=JSON.parse(e.class);var n=this.class.split("-");console.log(this.class.split("-")),n.length>0&&(this.bookId=n[0],n.length>1&&(this.volumeId=n[1],n.length>2&&(this.unitId=n[2]))),this.getWords()},methods:{timeup(){e.index.showToast({title:"时间已到，答题结束",icon:"success",duration:2e3}).then((n=>{console.log(n),e.index.switchTab({url:"../index"}),this.canBack=!0}))},getWords(){0==this.unitId?this.isShow=!1:e.Ds.callFunction({name:"getWords",data:{unitId:this.unitId}}).then((e=>{console.log(e),this.answerArr=e.result.data,this.total=this.answerArr.length;var n=5*this.total;this.testSecond=n%60,this.testMinute=parseInt(n/60),this.testHour=parseInt(n/3600),console.log(this.total,this.testHour,this.testMinute,this.testSecond)}))},lastOne(){if(this.currentIndex>=1){let e={id:this.currentIndex+1,word:this.userAnswer};this.saveAnswer(e.id,e.word),this.currentIndex--,console.log(e),this.showAnswer(this.currentIndex+1)}},nextOne(){this.currentIndex<this.answerArr.length-1&&(this.currentIndex++,this.saveAnswer(this.currentIndex,this.userAnswer),this.showAnswer(this.currentIndex+1))},isInUAnswerArr_id(e){return!(this.userAnswerArr.findIndex((n=>n.id===e))<=-1)},isInUAnswerArr_word(e){return!(this.userAnswerArr.findIndex((n=>n.word===e))<=-1)},showAnswer(e){this.isInUAnswerArr_id(e)?this.userAnswerArr.forEach((n=>{n.id==e&&(this.userAnswer=n.word)})):this.userAnswer=""},saveAnswer(e,n){let s={id:e,word:n};console.log(s.id,this.isInUAnswerArr_id(s.id)),this.isInUAnswerArr_id(s.id)||""==this.userAnswer?(console.log(s.word,this.isInUAnswerArr_word(s.word)),(!this.isInUAnswerArr_word(s.word)&&""!=this.userAnswer||this.isInUAnswerArr_id(s.id)&&""!=this.userAnswer)&&this.userAnswerArr.forEach((e=>{e.id==s.id&&(e.word=s.word,console.log("答案更新成功"))})),console.log(this.userAnswerArr)):this.isInUAnswerArr_word(s.word)&&this.isInUAnswerArr_id(s.id)||(this.userAnswerArr.push(s),console.log("新答案保存成功"))},dialogConfirm(){console.log("点击了确认"),this.canBack=!0},dialogClose(){console.log("点击了取消")}},onUnload(){console.log(0!=this.unitId,!this.canBack),0==this.unitId||this.canBack||(this.tipContent="你还未完成所有题目，退出将失去所有的答案！",this.$refs.alertDialog.open(),console.log("卸载页面"))}};if(!Array){(e.resolveComponent("uni-countdown")+e.resolveComponent("uni-section")+e.resolveComponent("uni-notice-bar")+e.resolveComponent("uni-popup-dialog")+e.resolveComponent("uni-popup"))()}Math||((()=>"../../../uni_modules/uni-countdown/components/uni-countdown/uni-countdown.js")+(()=>"../../../uni_modules/uni-section/components/uni-section/uni-section.js")+(()=>"../../../uni_modules/uni-notice-bar/components/uni-notice-bar/uni-notice-bar.js")+(()=>"../../../uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog.js")+(()=>"../../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const s=e._export_sfc(n,[["render",function(n,s,t,r,o,i){return{a:e.o(i.timeup),b:e.p({"show-day":!1,hour:o.testHour,minute:o.testMinute,second:o.testSecond}),c:e.p({title:"答题时间还剩",type:"line"}),d:e.f(o.answerArr,((n,s,t)=>({a:e.t(n.paraphrase),b:o.currentIndex==s,c:n._id}))),e:o.userAnswer,f:e.o((e=>o.userAnswer=e.detail.value)),g:e.n(0==o.currentIndex?"notSelect":""),h:e.o((e=>i.lastOne())),i:e.t(o.currentIndex+1+"/"+o.total),j:e.n(o.currentIndex==o.answerArr.length-1?"notSelect":""),k:e.o((e=>i.nextOne())),l:o.isShow,m:e.p({"show-icon":!0,scrollable:!0,text:"暂无该单元的数据,试试别的功能吧!"}),n:e.p({title:"提示",type:"line"}),o:!o.isShow,p:e.o(i.dialogConfirm),q:e.o(i.dialogClose),r:e.p({type:"warn",cancelText:"取消",confirmText:"确认",title:"提示",content:o.tipContent}),s:e.sr("alertDialog","7a6c6c6c-4"),t:e.p({type:"dialog"})}}]]);wx.createPage(s);
