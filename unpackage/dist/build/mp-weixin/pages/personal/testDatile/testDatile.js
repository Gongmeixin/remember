"use strict";const r=require("../../../common/vendor.js"),e={data:()=>({rightWordsArr:[],userWordsArr:[],unitIdArr:[],score:0,current:0,ritghtAnswerArr:[],currentUnit:1,isShow:!0}),methods:{getUsrWords(e){r.Ds.callFunction({name:"getUserWords",data:{openid:e}}).then((e=>{0!=e.result.data.length?(this.userWordsArr=e.result.data,console.log(this.userWordsArr),this.getUnitId()):(r.index.hideLoading(),this.isShow=!1)}))},getUnitId(){let r=this.unitIdArr;this.userWordsArr.forEach((e=>{r.some((r=>r==e.unit+"单元"))||(this.unitIdArr.push(e.unit+"单元"),this.getRightWords(e.unit))}))},getRightWords(e){r.Ds.callFunction({name:"getWords",data:{unitId:e}}).then((e=>{let t=[];t=e.result.data,this.rightWordsArr=this.rightWordsArr.concat(t),r.index.hideLoading()}))},playAudio:function(e){const t=r.index.createInnerAudioContext();t.autoplay=!0,t.src="http://dict.youdao.com/dictvoice?type=0&audio="+e,t.onPlay((()=>{console.log("开始播放")})),t.onError((r=>{console.log(r.errMsg),console.log(r.errCode)}))},onClickItem(r){this.current!=r.currentIndex&&(this.current=r.currentIndex,this.currentUnit=this.unitIdArr[this.current].split("")[0])},getRightAnswer(){this.rightWordsArr.forEach((r=>{console.log(this.findUserWord(r._id,r.word)==r.word)}))}},onLoad(){var e=this;r.index.showLoading({title:"加载中...",mask:!1}).then((t=>{r.index.getStorage({key:"openid",success(r){console.log(r),e.getUsrWords(r.data)}})}))},computed:{findUserWord:()=>function(r,e){let t=this.userWordsArr.findIndex((e=>e.word_id===r));return t<=-1?"您未作答！":this.userWordsArr[t].userWord}}};if(!Array){(r.resolveComponent("uni-segmented-control")+r.resolveComponent("uni-icons"))()}Math||((()=>"../../../uni_modules/uni-segmented-control/components/uni-segmented-control/uni-segmented-control.js")+(()=>"../../../uni_modules/uni-icons/components/uni-icons/uni-icons.js"))();const t=r._export_sfc(e,[["render",function(e,t,o,n,s,i){return{a:r.o(i.onClickItem),b:r.p({current:s.current,values:s.unitIdArr,"style-type":"text","active-color":"'#007aff'"}),c:r.f(s.rightWordsArr,((e,t,o)=>r.e({a:r.t(e.word),b:r.t(i.findUserWord(e._id)),c:i.findUserWord(e._id,e.word)==e.word},i.findUserWord(e._id,e.word)==e.word?{d:"e4ce76ae-1-"+o,e:r.p({type:"checkmarkempty",size:"30",color:"green"})}:{g:"e4ce76ae-2-"+o,h:r.p({type:"closeempty",size:"30",color:"red"})},{f:i.findUserWord(e._id,e.word)==e.word,i:r.t(e.pronounce),j:r.o((r=>i.playAudio(e.word)),t),k:"e4ce76ae-3-"+o,l:r.t(e.paraphrase),m:t,n:s.current+1==e.unit}))),d:r.p({"custom-prefix":"custom-icon",type:"sound",size:"18"}),e:s.isShow,f:!s.isShow}}]]);wx.createPage(t);
